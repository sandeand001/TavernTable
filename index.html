<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TavernTable - Isometric D&D Grid</title>
  <meta name="description" content="An interactive isometric grid for tabletop RPG games with creature tokens and dice rolling">
  <link rel="stylesheet" href="src/ui/styles.css">
</head>
<body>
  <!-- Main Game Canvas Container -->
  <div id="game-container" aria-label="Game canvas for TavernTable grid"></div>
  
  <!-- 3D Dice Container -->
  <div id="dice-3d-container" aria-label="3D dice rolling area"></div>
  
  <!-- Dice Rolling Panel -->
  <div id="dice-panel" role="complementary" aria-label="Dice rolling controls">
    <div>🎲 Roll Dice:</div>
    <div class="dice-count-container">
      <label for="dice-count" class="dice-count-label">Count:</label>
      <input type="number" id="dice-count" min="1" max="10" value="1" aria-describedby="dice-help">
    </div>
    <button onclick="rollDice(4)" aria-label="Roll 4-sided die">d4</button>
    <button onclick="rollDice(6)" aria-label="Roll 6-sided die">d6</button>
    <button onclick="rollDice(8)" aria-label="Roll 8-sided die">d8</button>
    <button onclick="rollDice(10)" aria-label="Roll 10-sided die">d10</button>
    <button onclick="rollDice(12)" aria-label="Roll 12-sided die">d12</button>
    <button onclick="rollDice(20)" aria-label="Roll 20-sided die">d20</button>
    <div id="dice-result" aria-live="polite">Result: -</div>
    <div id="dice-help" class="sr-only">Select number of dice and click a die type to roll</div>
  </div>
  
  <!-- Token and Game Controls Panel -->
  <div id="token-panel" role="complementary" aria-label="Game controls and creature tokens">
    <!-- Creature Token Selection -->
    <div id="creature-header" onclick="toggleCreatureTokens();" role="button" aria-expanded="true" aria-controls="creature-content" tabindex="0">
      🗡️ Creature Tokens: <span id="creature-arrow">▼</span>
    </div>
    <div id="creature-content" role="group" aria-label="Creature token selection">
      <button id="token-beholder" onclick="selectToken('beholder')" aria-label="Select Beholder token">👁️ Beholder</button>
      <button id="token-dragon" onclick="selectToken('dragon')" aria-label="Select Dragon token">🐉 Dragon</button>
      <button id="token-goblin" onclick="selectToken('goblin')" class="selected" aria-label="Select Goblin token" aria-pressed="true">🧌 Goblin</button>
      <button id="token-mindflayer" onclick="selectToken('mindflayer')" aria-label="Select Mind Flayer token">🐙 Mind Flayer</button>
      <button id="token-minotaur" onclick="selectToken('minotaur')" aria-label="Select Minotaur token">🐂 Minotaur</button>
      <button id="token-orc" onclick="selectToken('orc')" aria-label="Select Orc token">🧟 Orc</button>
      <button id="token-owlbear" onclick="selectToken('owlbear')" aria-label="Select Owlbear token">🐻 Owlbear</button>
      <button id="token-skeleton" onclick="selectToken('skeleton')" aria-label="Select Skeleton token">💀 Skeleton</button>
      <button id="token-troll" onclick="selectToken('troll')" aria-label="Select Troll token">🧟‍♂️ Troll</button>
    </div>
    
    <!-- Token Actions -->
    <div class="token-section" role="group" aria-label="Token actions">
      <div>⚙️ Token Actions:</div>
      <button id="token-remove" onclick="selectToken('remove')" class="facing-button" aria-label="Select remove mode to delete tokens">🚫 Remove</button>
    </div>
    
    <!-- Facing Direction Controls -->
    <div class="token-section" role="group" aria-label="Token facing direction">
      <div>🔄 Facing Direction:</div>
      <button id="facing-right" onclick="toggleFacing()" class="facing-button selected" aria-pressed="true" aria-label="Toggle token facing direction">➡️ Right</button>
    </div>
    
    <!-- Grid Configuration -->
    <div class="token-section" role="group" aria-label="Grid configuration">
      <div>📐 Grid Size:</div>
      <div class="grid-controls-row">
        <label class="grid-label" for="grid-width">Width:</label>
        <input type="number" id="grid-width" min="5" max="50" value="10" class="grid-input" aria-describedby="grid-help">
        <label class="grid-label" for="grid-height">Height:</label>
        <input type="number" id="grid-height" min="5" max="50" value="10" class="grid-input" aria-describedby="grid-help">
      </div>
      <button onclick="resizeGrid()" class="grid-button" aria-label="Apply new grid dimensions">🔄 Resize Grid</button>
      <button onclick="resetZoom()" class="grid-button" aria-label="Reset zoom level to default">🔍 Reset Zoom</button>
      <div id="grid-help" class="sr-only">Grid size must be between 5x5 and 50x50</div>
    </div>
    
    <!-- Status and Info -->
    <div id="token-info" aria-live="polite">Click on grid to place selected token</div>
    
    <!-- Help Section -->
    <div class="help-section" role="complementary" aria-label="Game controls help">
      <div>🎮 Controls:</div>
      <div class="help-text">• <strong>Space + Drag</strong>: Pan grid</div>
      <div class="help-text">• <strong>Right-click + Drag Token</strong>: Move token</div>
      <div class="help-text">• <strong>Mouse Wheel</strong>: Zoom in/out</div>
    </div>
  </div>

  <!-- Error Display Container (created by ErrorHandler) -->
  <div id="error-display" aria-live="assertive"></div>

  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

  <!-- Core Configuration and Utilities (ES6) -->
  <script type="module" src="./src/config/GameConstants.js"></script>
  <script type="module" src="./src/utils/ErrorHandler.js"></script>
  <script type="module" src="./src/utils/Validation.js"></script>

  <!-- Core Game Modules (ES6) -->
  <script type="module" src="./src/core/SpriteManager.js"></script>
  <script type="module" src="./src/core/GameManager.js"></script>
  
  <!-- Creature System (ES6) -->
  <script type="module" src="./src/entities/creatures/CreatureToken.js"></script>
  <script type="module" src="./src/entities/creatures/CreatureFactory.js"></script>
  <script type="module" src="./src/entities/creatures/index.js"></script>
  
  <!-- Game Systems (ES6) -->
  <script type="module" src="./src/systems/DragController.js"></script>
  <script type="module" src="./src/systems/dice/dice.js"></script>
  <script type="module" src="./src/systems/dice/diceLog.js"></script>
  
  <!-- Main Application Entry Point -->
  <script type="module" src="./src/ui/UIController.js"></script>

  <style>
    /* Screen reader only class for accessibility */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</body>
</html>
