<!DOCTYPE html>
<html>
<head>
    <title>CreatureToken Reference Test</title>
</head>
<body>
    <h1>CreatureToken Reference Test</h1>
    <div id="results"></div>

    <script>
        function logResult(message) {
            document.getElementById('results').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }
    </script>

    <!-- Load PIXI -->
    <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
    
    <!-- Load GameConfig -->
    <script src="./js/config/GameConfig.js"></script>

    <!-- Load CreatureToken.js -->
    <script src="./js/creatures/CreatureToken.js"></script>
    
    <script>
        logResult('✅ CreatureToken loaded: ' + (typeof CreatureToken !== 'undefined'));
        
        if (typeof CreatureToken !== 'undefined') {
            logResult('✅ CreatureToken is: ' + CreatureToken.toString().substring(0, 100) + '...');
        }
    </script>

    <!-- Load Dragon.js -->
    <script src="./js/creatures/Dragon.js"></script>
    
    <script>
        logResult('✅ Dragon loaded: ' + (typeof Dragon !== 'undefined'));
        
        if (typeof Dragon !== 'undefined') {
            try {
                const dragon = new Dragon(0, 0);
                logResult('✅ Dragon creation successful: ' + dragon.type);
                logResult('✅ Dragon has sprite: ' + (dragon.sprite !== null));
                logResult('✅ Dragon sprite type: ' + (dragon.sprite ? dragon.sprite.constructor.name : 'null'));
            } catch (error) {
                logResult('❌ Dragon creation failed: ' + error.message);
            }
        }
    </script>

    <!-- Test if there's a conflict -->
    <script>
        // Check what's in the global scope
        const globalKeys = Object.keys(window).filter(key => 
            key.includes('Creature') || key.includes('Dragon') || key.includes('Token')
        );
        logResult('Global scope creature-related objects: ' + globalKeys.join(', '));
        
        // Check if there are multiple definitions
        if (window.CreatureToken) {
            logResult('CreatureToken source: ' + (window.CreatureToken.toString().includes('createCreatureSprite') ? 'New modular version' : 'Old version or unknown'));
        }
    </script>
</body>
</html>
